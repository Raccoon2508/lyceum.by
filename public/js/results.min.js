function ready(e){"loading"!=document.readyState?e():document.addEventListener?document.addEventListener("DOMContentLoaded",e):document.attachEvent("onreadystatechange",function(){"loading"!=document.readyState&&e()})}ready(function(){function e(e,t){if(window.File&&window.FileReader&&window.FileList&&window.Blob){this.element=e,this.input=$(this.element),this.wrapper=null,this.preview=null,this.filenameWrapper=null,this.settings=$.extend(!0,{defaultFile:"",maxFileSize:0,minWidth:0,maxWidth:0,minHeight:0,maxHeight:0,showRemove:!0,showLoader:!0,showErrors:!0,errorTimeout:3e3,errorsPosition:"overlay",imgFileExtensions:["png","jpg","jpeg","gif","bmp"],maxFileSizePreview:"20M",allowedFormats:["portrait","square","landscape"],allowedFileExtensions:["*"],messages:{default:"Кликните тут или перетащите сюда файл",replace:"Чтобы заменит картинку, кликните тут или перетащите сюда файл",remove:"Удалить",error:"Что-то пошло не так)"},error:{fileSize:"Слишком большой файл ({{ value }} - максимум).",fileExtension:"Неподходящий формат файла. Нам подходят только картинки форамта {{ value }}.",minWidth:"The image width is too small ({{ value }}}px min).",maxWidth:"The image width is too big ({{ value }}}px max).",minHeight:"The image height is too small ({{ value }}}px min).",maxHeight:"The image height is too big ({{ value }}px max).",imageFormat:"The image format is not allowed ({{ value }} only)."},tpl:{wrap:'<div class="dropify-wrapper"></div>',loader:'<div class="dropify-loader"></div>',message:'<div class="dropify-message"><span class="file-icon" /> <p>{{ default }}</p></div>',preview:'<div class="dropify-preview"><span class="dropify-render"></span><div class="dropify-infos"><div class="dropify-infos-inner"><p class="dropify-infos-message">{{ replace }}</p></div></div></div>',filename:'<p class="dropify-filename"><span class="file-icon"></span> <span class="dropify-filename-inner"></span></p>',clearButton:'<button type="button" class="dropify-clear">{{ remove }}</button>',errorLine:'<p class="dropify-error">{{ error }}</p>',errorsContainer:'<div class="dropify-errors-container"><ul></ul></div>'}},t,this.input.data()),this.errorsEvent=$.Event("dropify.errors"),this.isDisabled=!1,this.isInit=!1,this.file={object:null,name:null,size:null,width:null,height:null,type:null},Array.isArray(this.settings.allowedFormats)||(this.settings.allowedFormats=this.settings.allowedFormats.split(" ")),Array.isArray(this.settings.allowedFileExtensions)||(this.settings.allowedFileExtensions=this.settings.allowedFileExtensions.split(" ")),this.onChange=this.onChange.bind(this),this.clearElement=this.clearElement.bind(this),this.onFileReady=this.onFileReady.bind(this),this.translateMessages(),this.createElements(),this.setContainerSize(),this.errorsEvent.errors=[],this.input.on("change",this.onChange)}}return e.prototype.onChange=function(){this.resetPreview(),this.readFile(this.element)},e.prototype.createElements=function(){this.isInit=!0,this.input.wrap($(this.settings.tpl.wrap)),this.wrapper=this.input.parent();var e=$(this.settings.tpl.message).insertBefore(this.input);$(this.settings.tpl.errorLine).appendTo(e),!0===this.isTouchDevice()&&this.wrapper.addClass("touch-fallback"),this.input.attr("disabled")&&(this.isDisabled=!0,this.wrapper.addClass("disabled")),!0===this.settings.showLoader&&(this.loader=$(this.settings.tpl.loader),this.loader.insertBefore(this.input)),this.preview=$(this.settings.tpl.preview),this.preview.insertAfter(this.input),!1===this.isDisabled&&!0===this.settings.showRemove&&(this.clearButton=$(this.settings.tpl.clearButton),this.clearButton.insertAfter(this.input),this.clearButton.on("click",this.clearElement)),this.filenameWrapper=$(this.settings.tpl.filename),this.filenameWrapper.prependTo(this.preview.find(".dropify-infos-inner")),!0===this.settings.showErrors&&(this.errorsContainer=$(this.settings.tpl.errorsContainer),"outside"===this.settings.errorsPosition?this.errorsContainer.insertAfter(this.wrapper):this.errorsContainer.insertBefore(this.input));var t=this.settings.defaultFile||"";""!==t.trim()&&(this.file.name=this.cleanFilename(t),this.setPreview(this.isImage(),t))},e.prototype.readFile=function(e){if(e.files&&e.files[0]){var t=new FileReader,s=new Image,i=e.files[0],n=null,o=this,r=$.Event("dropify.fileReady");this.clearErrors(),this.showLoader(),this.setFileInformations(i),this.errorsEvent.errors=[],this.checkFileSize(),this.isFileExtensionAllowed(),this.isImage()&&this.file.size<this.sizeToByte(this.settings.maxFileSizePreview)?(this.input.on("dropify.fileReady",this.onFileReady),t.readAsDataURL(i),t.onload=function(e){n=e.target.result,s.src=e.target.result,s.onload=function(){o.setFileDimensions(this.width,this.height),o.validateImage(),o.input.trigger(r,[!0,n])}}.bind(this)):this.onFileReady(!1)}},e.prototype.onFileReady=function(e,t,s){if(this.input.off("dropify.fileReady",this.onFileReady),0===this.errorsEvent.errors.length)this.setPreview(t,s);else{this.input.trigger(this.errorsEvent,[this]);for(var i=this.errorsEvent.errors.length-1;i>=0;i--){var n=this.errorsEvent.errors[i].namespace.split(".").pop();this.showError(n)}if(void 0!==this.errorsContainer){this.errorsContainer.addClass("visible");var o=this.errorsContainer;setTimeout(function(){o.removeClass("visible")},this.settings.errorTimeout)}this.wrapper.addClass("has-error"),this.resetPreview(),this.clearElement()}},e.prototype.setFileInformations=function(e){this.file.object=e,this.file.name=e.name,this.file.size=e.size,this.file.type=e.type,this.file.width=null,this.file.height=null},e.prototype.setFileDimensions=function(e,t){this.file.width=e,this.file.height=t},e.prototype.setPreview=function(e,t){this.wrapper.removeClass("has-error").addClass("has-preview"),this.filenameWrapper.children(".dropify-filename-inner").html(this.file.name);var s=this.preview.children(".dropify-render");if(this.hideLoader(),!0===e){var i=$("<img />").attr("src",t);this.settings.height&&i.css("max-height",this.settings.height),i.appendTo(s)}else $("<i />").attr("class","dropify-font-file").appendTo(s),$('<span class="dropify-extension" />').html(this.getFileType()).appendTo(s);this.preview.fadeIn()},e.prototype.resetPreview=function(){this.wrapper.removeClass("has-preview");var e=this.preview.children(".dropify-render");e.find(".dropify-extension").remove(),e.find("i").remove(),e.find("img").remove(),this.preview.hide(),this.hideLoader()},e.prototype.cleanFilename=function(e){var t=e.split("\\").pop();return t==e&&(t=e.split("/").pop()),""!==e?t:""},e.prototype.clearElement=function(){if(0===this.errorsEvent.errors.length){var e=$.Event("dropify.beforeClear");this.input.trigger(e,[this]),!1!==e.result&&(this.resetFile(),this.input.val(""),this.resetPreview(),this.input.trigger($.Event("dropify.afterClear"),[this]))}else this.resetFile(),this.input.val(""),this.resetPreview()},e.prototype.resetFile=function(){this.file.object=null,this.file.name=null,this.file.size=null,this.file.type=null,this.file.width=null,this.file.height=null},e.prototype.setContainerSize=function(){this.settings.height&&this.wrapper.height(this.settings.height)},e.prototype.isTouchDevice=function(){return"ontouchstart"in window||navigator.MaxTouchPoints>0||navigator.msMaxTouchPoints>0},e.prototype.getFileType=function(){return this.file.name.split(".").pop().toLowerCase()},e.prototype.isImage=function(){return"-1"!=this.settings.imgFileExtensions.indexOf(this.getFileType())},e.prototype.isFileExtensionAllowed=function(){return"-1"!=this.settings.allowedFileExtensions.indexOf("*")||"-1"!=this.settings.allowedFileExtensions.indexOf(this.getFileType())||(this.pushError("fileExtension"),!1)},e.prototype.translateMessages=function(){for(var e in this.settings.tpl)for(var t in this.settings.messages)this.settings.tpl[e]=this.settings.tpl[e].replace("{{ "+t+" }}",this.settings.messages[t])},e.prototype.checkFileSize=function(){0!==this.sizeToByte(this.settings.maxFileSize)&&this.file.size>this.sizeToByte(this.settings.maxFileSize)&&this.pushError("fileSize")},e.prototype.sizeToByte=function(e){var t=0;if(0!==e){var s=e.slice(-1).toUpperCase();"K"===s?t=1024*parseFloat(e):"M"===s?t=1048576*parseFloat(e):"G"===s&&(t=1073741824*parseFloat(e))}return t},e.prototype.validateImage=function(){0!==this.settings.minWidth&&this.settings.minWidth>=this.file.width&&this.pushError("minWidth"),0!==this.settings.maxWidth&&this.settings.maxWidth<=this.file.width&&this.pushError("maxWidth"),0!==this.settings.minHeight&&this.settings.minHeight>=this.file.height&&this.pushError("minHeight"),0!==this.settings.maxHeight&&this.settings.maxHeight<=this.file.height&&this.pushError("maxHeight"),"-1"==this.settings.allowedFormats.indexOf(this.getImageFormat())&&this.pushError("imageFormat")},e.prototype.getImageFormat=function(){return this.file.width==this.file.height?"square":this.file.width<this.file.height?"portrait":this.file.width>this.file.height?"landscape":void 0},e.prototype.pushError=function(e){var t=$.Event("dropify.error."+e);this.errorsEvent.errors.push(t),this.input.trigger(t,[this])},e.prototype.clearErrors=function(){void 0!==this.errorsContainer&&this.errorsContainer.children("ul").html("")},e.prototype.showError=function(e){void 0!==this.errorsContainer&&this.errorsContainer.children("ul").append("<li>"+this.getError(e)+"</li>")},e.prototype.getError=function(e){var t=this.settings.error[e],s="";return"fileSize"===e?s=this.settings.maxFileSize:"minWidth"===e?s=this.settings.minWidth:"maxWidth"===e?s=this.settings.maxWidth:"minHeight"===e?s=this.settings.minHeight:"maxHeight"===e?s=this.settings.maxHeight:"imageFormat"===e?s=this.settings.allowedFormats.join(", "):"fileExtension"===e&&(s=this.settings.allowedFileExtensions.join(", ")),""!==s?t.replace("{{ value }}",s):t},e.prototype.showLoader=function(){void 0!==this.loader&&this.loader.show()},e.prototype.hideLoader=function(){void 0!==this.loader&&this.loader.hide()},e.prototype.destroy=function(){this.input.siblings().remove(),this.input.unwrap(),this.isInit=!1},e.prototype.init=function(){this.createElements()},e.prototype.isDropified=function(){return this.isInit},$.fn.dropify=function(t){return this.each(function(){$.data(this,"dropify")||$.data(this,"dropify",new e(this,t))}),this},e});var componentHandler={upgradeDom:function(e,t){},upgradeElement:function(e,t){},upgradeElements:function(e){},upgradeAllRegistered:function(){},registerUpgradedCallback:function(e,t){},register:function(e){},downgradeElements:function(e){}};(componentHandler=function(){"use strict";var e=[],t=[],s="mdlComponentConfigInternal_";function i(t,s){for(var i=0;i<e.length;i++)if(e[i].className===t)return void 0!==s&&(e[i]=s),e[i];return!1}function n(e){var t=e.getAttribute("data-upgraded");return null===t?[""]:t.split(",")}function o(e,t){return-1!==n(e).indexOf(t)}function r(t,s){if(void 0===t&&void 0===s)for(var n=0;n<e.length;n++)r(e[n].className,e[n].cssClass);else{var o=t;if(void 0===s){var l=i(o);l&&(s=l.cssClass)}for(var d=document.querySelectorAll("."+s),h=0;h<d.length;h++)a(d[h],o)}}function a(r,a){if(!("object"==typeof r&&r instanceof Element))throw new Error("Invalid argument provided to upgrade MDL element.");var l=n(r),d=[];if(a)o(r,a)||d.push(i(a));else{var h=r.classList;e.forEach(function(e){h.contains(e.cssClass)&&-1===d.indexOf(e)&&!o(r,e.className)&&d.push(e)})}for(var c,p=0,u=d.length;p<u;p++){if(!(c=d[p]))throw new Error("Unable to find a registered component for the given class.");l.push(c.className),r.setAttribute("data-upgraded",l.join(","));var _=new c.classConstructor(r);_[s]=c,t.push(_);for(var m=0,f=c.callbacks.length;m<f;m++)c.callbacks[m](r);c.widget&&(r[c.className]=_);var g=document.createEvent("Events");g.initEvent("mdl-componentupgraded",!0,!0),r.dispatchEvent(g)}}function l(e){if(e){var i=t.indexOf(e);t.splice(i,1);var n=e.element_.getAttribute("data-upgraded").split(","),o=n.indexOf(e[s].classAsString);n.splice(o,1),e.element_.setAttribute("data-upgraded",n.join(","));var r=document.createEvent("Events");r.initEvent("mdl-componentdowngraded",!0,!0),e.element_.dispatchEvent(r)}}return{upgradeDom:r,upgradeElement:a,upgradeElements:function e(t){Array.isArray(t)||(t="function"==typeof t.item?Array.prototype.slice.call(t):[t]);for(var s,i=0,n=t.length;i<n;i++)(s=t[i])instanceof HTMLElement&&(a(s),s.children.length>0&&e(s.children))},upgradeAllRegistered:function(){for(var t=0;t<e.length;t++)r(e[t].className)},registerUpgradedCallback:function(e,t){var s=i(e);s&&s.callbacks.push(t)},register:function(t){var n=!0;void 0===t.widget&&void 0===t.widget||(n=t.widget||t.widget);var o={classConstructor:t.constructor||t.constructor,className:t.classAsString||t.classAsString,cssClass:t.cssClass||t.cssClass,widget:n,callbacks:[]};if(e.forEach(function(e){if(e.cssClass===o.cssClass)throw new Error("The provided cssClass has already been registered: "+e.cssClass);if(e.className===o.className)throw new Error("The provided className has already been registered")}),t.constructor.prototype.hasOwnProperty(s))throw new Error("MDL component classes must not have "+s+" defined as a property.");i(t.classAsString,o)||e.push(o)},downgradeElements:function(e){var s=function(e){t.filter(function(t){return t.element_===e}).forEach(l)};if(e instanceof Array||e instanceof NodeList)for(var i=0;i<e.length;i++)s(e[i]);else{if(!(e instanceof Node))throw new Error("Invalid argument provided to downgrade MDL nodes.");s(e)}}}}()).ComponentConfigPublic,componentHandler.ComponentConfig,componentHandler.Component,componentHandler.upgradeDom=componentHandler.upgradeDom,componentHandler.upgradeElement=componentHandler.upgradeElement,componentHandler.upgradeElements=componentHandler.upgradeElements,componentHandler.upgradeAllRegistered=componentHandler.upgradeAllRegistered,componentHandler.registerUpgradedCallback=componentHandler.registerUpgradedCallback,componentHandler.register=componentHandler.register,componentHandler.downgradeElements=componentHandler.downgradeElements,window.componentHandler=componentHandler,window.componentHandler=componentHandler,ready(function(){"use strict";"classList"in document.documentElement&&"querySelector"in document&&"addEventListener"in window&&"forEach"in Array.prototype?(document.documentElement.classList.add("mdl-js"),componentHandler.upgradeAllRegistered()):(componentHandler.upgradeElement=function(){},componentHandler.register=function(){})}),function(){"use strict";var e=function(e){this.element_=e,this.init()};window.MaterialButton=e,e.prototype.Constant_={},e.prototype.CssClasses_={RIPPLE_EFFECT:"mdl-js-ripple-effect",RIPPLE_CONTAINER:"mdl-button__ripple-container",RIPPLE:"mdl-ripple"},e.prototype.blurHandler_=function(e){e&&this.element_.blur()},e.prototype.disable=function(){this.element_.disabled=!0},e.prototype.disable=e.prototype.disable,e.prototype.enable=function(){this.element_.disabled=!1},e.prototype.enable=e.prototype.enable,e.prototype.init=function(){if(this.element_){if(this.element_.classList.contains(this.CssClasses_.RIPPLE_EFFECT)){var e=document.createElement("span");e.classList.add(this.CssClasses_.RIPPLE_CONTAINER),this.rippleElement_=document.createElement("span"),this.rippleElement_.classList.add(this.CssClasses_.RIPPLE),e.appendChild(this.rippleElement_),this.boundRippleBlurHandler=this.blurHandler_.bind(this),this.rippleElement_.addEventListener("mouseup",this.boundRippleBlurHandler),this.element_.appendChild(e)}this.boundButtonBlurHandler=this.blurHandler_.bind(this),this.element_.addEventListener("mouseup",this.boundButtonBlurHandler),this.element_.addEventListener("mouseleave",this.boundButtonBlurHandler)}},componentHandler.register({constructor:e,classAsString:"MaterialButton",cssClass:"mdl-js-button",widget:!0})}(),function(){"use strict";var e=function(e){this.element_=e,this.init()};function t(e,t){if(e){if(t.element_.classList.contains(t.CssClasses_.MDL_JS_RIPPLE_EFFECT)){var s=document.createElement("span");s.classList.add(t.CssClasses_.MDL_RIPPLE_CONTAINER),s.classList.add(t.CssClasses_.MDL_JS_RIPPLE_EFFECT);var i=document.createElement("span");i.classList.add(t.CssClasses_.MDL_RIPPLE),s.appendChild(i),e.appendChild(s)}e.addEventListener("click",function(s){if("#"===e.getAttribute("href").charAt(0)){s.preventDefault();var i=e.getAttribute("href").split("#")[1],n=t.element_.querySelector("#"+i);t.resetTabState_(),t.resetPanelState_(),e.classList.add(t.CssClasses_.ACTIVE_CLASS),n.classList.add(t.CssClasses_.ACTIVE_CLASS)}})}}window.MaterialTabs=e,e.prototype.Constant_={},e.prototype.CssClasses_={TAB_CLASS:"mdl-tabs__tab",PANEL_CLASS:"mdl-tabs__panel",ACTIVE_CLASS:"is-active",UPGRADED_CLASS:"is-upgraded",MDL_JS_RIPPLE_EFFECT:"mdl-js-ripple-effect",MDL_RIPPLE_CONTAINER:"mdl-tabs__ripple-container",MDL_RIPPLE:"mdl-ripple",MDL_JS_RIPPLE_EFFECT_IGNORE_EVENTS:"mdl-js-ripple-effect--ignore-events"},e.prototype.initTabs_=function(){this.element_.classList.contains(this.CssClasses_.MDL_JS_RIPPLE_EFFECT)&&this.element_.classList.add(this.CssClasses_.MDL_JS_RIPPLE_EFFECT_IGNORE_EVENTS),this.tabs_=this.element_.querySelectorAll("."+this.CssClasses_.TAB_CLASS),this.panels_=this.element_.querySelectorAll("."+this.CssClasses_.PANEL_CLASS);for(var e=0;e<this.tabs_.length;e++)new t(this.tabs_[e],this);this.element_.classList.add(this.CssClasses_.UPGRADED_CLASS)},e.prototype.resetTabState_=function(){for(var e=0;e<this.tabs_.length;e++)this.tabs_[e].classList.remove(this.CssClasses_.ACTIVE_CLASS)},e.prototype.resetPanelState_=function(){for(var e=0;e<this.panels_.length;e++)this.panels_[e].classList.remove(this.CssClasses_.ACTIVE_CLASS)},e.prototype.init=function(){this.element_&&this.initTabs_()},componentHandler.register({constructor:e,classAsString:"MaterialTabs",cssClass:"mdl-js-tabs"})}(),function(){"use strict";var e=function(e){this.element_=e,this.init()};window.MaterialSpinner=e,e.prototype.Constant_={MDL_SPINNER_LAYER_COUNT:4},e.prototype.CssClasses_={MDL_SPINNER_LAYER:"mdl-spinner__layer",MDL_SPINNER_CIRCLE_CLIPPER:"mdl-spinner__circle-clipper",MDL_SPINNER_CIRCLE:"mdl-spinner__circle",MDL_SPINNER_GAP_PATCH:"mdl-spinner__gap-patch",MDL_SPINNER_LEFT:"mdl-spinner__left",MDL_SPINNER_RIGHT:"mdl-spinner__right"},e.prototype.createLayer=function(e){var t=document.createElement("div");t.classList.add(this.CssClasses_.MDL_SPINNER_LAYER),t.classList.add(this.CssClasses_.MDL_SPINNER_LAYER+"-"+e);var s=document.createElement("div");s.classList.add(this.CssClasses_.MDL_SPINNER_CIRCLE_CLIPPER),s.classList.add(this.CssClasses_.MDL_SPINNER_LEFT);var i=document.createElement("div");i.classList.add(this.CssClasses_.MDL_SPINNER_GAP_PATCH);var n=document.createElement("div");n.classList.add(this.CssClasses_.MDL_SPINNER_CIRCLE_CLIPPER),n.classList.add(this.CssClasses_.MDL_SPINNER_RIGHT);for(var o=[s,i,n],r=0;r<o.length;r++){var a=document.createElement("div");a.classList.add(this.CssClasses_.MDL_SPINNER_CIRCLE),o[r].appendChild(a)}t.appendChild(s),t.appendChild(i),t.appendChild(n),this.element_.appendChild(t)},e.prototype.createLayer=e.prototype.createLayer,e.prototype.stop=function(){this.element_.classList.remove("is-active")},e.prototype.stop=e.prototype.stop,e.prototype.start=function(){this.element_.classList.add("is-active")},e.prototype.start=e.prototype.start,e.prototype.init=function(){if(this.element_){for(var e=1;e<=this.Constant_.MDL_SPINNER_LAYER_COUNT;e++)this.createLayer(e);this.element_.classList.add("is-upgraded")}},componentHandler.register({constructor:e,classAsString:"MaterialSpinner",cssClass:"mdl-js-spinner",widget:!0})}(),function(){"use strict";var e=function(e){this.element_=e,this.maxRows=this.Constant_.NO_MAX_ROWS,this.init()};window.MaterialTextfield=e,e.prototype.Constant_={NO_MAX_ROWS:-1,MAX_ROWS_ATTRIBUTE:"maxrows"},e.prototype.CssClasses_={LABEL:"mdl-textfield__label",INPUT:"mdl-textfield__input",IS_DIRTY:"is-dirty",IS_FOCUSED:"is-focused",IS_DISABLED:"is-disabled",IS_INVALID:"is-invalid",IS_UPGRADED:"is-upgraded",HAS_PLACEHOLDER:"has-placeholder"},e.prototype.onKeyDown_=function(e){var t=e.target.value.split("\n").length;13===e.keyCode&&t>=this.maxRows&&e.preventDefault()},e.prototype.onFocus_=function(e){this.element_.classList.add(this.CssClasses_.IS_FOCUSED)},e.prototype.onBlur_=function(e){this.element_.classList.remove(this.CssClasses_.IS_FOCUSED)},e.prototype.onReset_=function(e){this.updateClasses_()},e.prototype.updateClasses_=function(){this.checkDisabled(),this.checkValidity(),this.checkDirty(),this.checkFocus()},e.prototype.checkDisabled=function(){this.input_.disabled?this.element_.classList.add(this.CssClasses_.IS_DISABLED):this.element_.classList.remove(this.CssClasses_.IS_DISABLED)},e.prototype.checkDisabled=e.prototype.checkDisabled,e.prototype.checkFocus=function(){Boolean(this.element_.querySelector(":focus"))?this.element_.classList.add(this.CssClasses_.IS_FOCUSED):this.element_.classList.remove(this.CssClasses_.IS_FOCUSED)},e.prototype.checkFocus=e.prototype.checkFocus,e.prototype.checkValidity=function(){this.input_.validity&&(this.input_.validity.valid?this.element_.classList.remove(this.CssClasses_.IS_INVALID):this.element_.classList.add(this.CssClasses_.IS_INVALID))},e.prototype.checkValidity=e.prototype.checkValidity,e.prototype.checkDirty=function(){this.input_.value&&this.input_.value.length>0?this.element_.classList.add(this.CssClasses_.IS_DIRTY):this.element_.classList.remove(this.CssClasses_.IS_DIRTY)},e.prototype.checkDirty=e.prototype.checkDirty,e.prototype.disable=function(){this.input_.disabled=!0,this.updateClasses_()},e.prototype.disable=e.prototype.disable,e.prototype.enable=function(){this.input_.disabled=!1,this.updateClasses_()},e.prototype.enable=e.prototype.enable,e.prototype.change=function(e){this.input_.value=e||"",this.updateClasses_()},e.prototype.change=e.prototype.change,e.prototype.init=function(){if(this.element_&&(this.label_=this.element_.querySelector("."+this.CssClasses_.LABEL),this.input_=this.element_.querySelector("."+this.CssClasses_.INPUT),this.input_)){this.input_.hasAttribute(this.Constant_.MAX_ROWS_ATTRIBUTE)&&(this.maxRows=parseInt(this.input_.getAttribute(this.Constant_.MAX_ROWS_ATTRIBUTE),10),isNaN(this.maxRows)&&(this.maxRows=this.Constant_.NO_MAX_ROWS)),this.input_.hasAttribute("placeholder")&&this.element_.classList.add(this.CssClasses_.HAS_PLACEHOLDER),this.boundUpdateClassesHandler=this.updateClasses_.bind(this),this.boundFocusHandler=this.onFocus_.bind(this),this.boundBlurHandler=this.onBlur_.bind(this),this.boundResetHandler=this.onReset_.bind(this),this.input_.addEventListener("input",this.boundUpdateClassesHandler),this.input_.addEventListener("focus",this.boundFocusHandler),this.input_.addEventListener("blur",this.boundBlurHandler),this.input_.addEventListener("reset",this.boundResetHandler),this.maxRows!==this.Constant_.NO_MAX_ROWS&&(this.boundKeyDownHandler=this.onKeyDown_.bind(this),this.input_.addEventListener("keydown",this.boundKeyDownHandler));var e=this.element_.classList.contains(this.CssClasses_.IS_INVALID);this.updateClasses_(),this.element_.classList.add(this.CssClasses_.IS_UPGRADED),e&&this.element_.classList.add(this.CssClasses_.IS_INVALID),this.input_.hasAttribute("autofocus")&&(this.element_.focus(),this.checkFocus())}},componentHandler.register({constructor:e,classAsString:"MaterialTextfield",cssClass:"mdl-js-textfield",widget:!0})}(),function(){"use strict";var e=function(e){this.element_=e,this.init()};window.MaterialMenu=e,e.prototype.Constant_={TRANSITION_DURATION_SECONDS:.3,TRANSITION_DURATION_FRACTION:.8,CLOSE_TIMEOUT:150},e.prototype.Keycodes_={ENTER:13,ESCAPE:27,SPACE:32,UP_ARROW:38,DOWN_ARROW:40},e.prototype.CssClasses_={CONTAINER:"mdl-menu__container",OUTLINE:"mdl-menu__outline",ITEM:"mdl-menu__item",ITEM_RIPPLE_CONTAINER:"mdl-menu__item-ripple-container",RIPPLE_EFFECT:"mdl-js-ripple-effect",RIPPLE_IGNORE_EVENTS:"mdl-js-ripple-effect--ignore-events",RIPPLE:"mdl-ripple",IS_UPGRADED:"is-upgraded",IS_VISIBLE:"is-visible",IS_ANIMATING:"is-animating",BOTTOM_LEFT:"mdl-menu--bottom-left",BOTTOM_RIGHT:"mdl-menu--bottom-right",TOP_LEFT:"mdl-menu--top-left",TOP_RIGHT:"mdl-menu--top-right",UNALIGNED:"mdl-menu--unaligned"},e.prototype.init=function(){if(this.element_){var e=document.createElement("div");e.classList.add(this.CssClasses_.CONTAINER),this.element_.parentElement.insertBefore(e,this.element_),this.element_.parentElement.removeChild(this.element_),e.appendChild(this.element_),this.container_=e;var t=document.createElement("div");t.classList.add(this.CssClasses_.OUTLINE),this.outline_=t,e.insertBefore(t,this.element_);var s=this.element_.getAttribute("for")||this.element_.getAttribute("data-mdl-for"),i=null;s&&(i=document.getElementById(s))&&(this.forElement_=i,i.addEventListener("click",this.handleForClick_.bind(this)),i.addEventListener("keydown",this.handleForKeyboardEvent_.bind(this)));var n=this.element_.querySelectorAll("."+this.CssClasses_.ITEM);this.boundItemKeydown_=this.handleItemKeyboardEvent_.bind(this),this.boundItemClick_=this.handleItemClick_.bind(this);for(var o=0;o<n.length;o++)n[o].addEventListener("click",this.boundItemClick_),n[o].tabIndex="-1",n[o].addEventListener("keydown",this.boundItemKeydown_);if(this.element_.classList.contains(this.CssClasses_.RIPPLE_EFFECT))for(this.element_.classList.add(this.CssClasses_.RIPPLE_IGNORE_EVENTS),o=0;o<n.length;o++){var r=n[o],a=document.createElement("span");a.classList.add(this.CssClasses_.ITEM_RIPPLE_CONTAINER);var l=document.createElement("span");l.classList.add(this.CssClasses_.RIPPLE),a.appendChild(l),r.appendChild(a),r.classList.add(this.CssClasses_.RIPPLE_EFFECT)}this.element_.classList.contains(this.CssClasses_.BOTTOM_LEFT)&&this.outline_.classList.add(this.CssClasses_.BOTTOM_LEFT),this.element_.classList.contains(this.CssClasses_.BOTTOM_RIGHT)&&this.outline_.classList.add(this.CssClasses_.BOTTOM_RIGHT),this.element_.classList.contains(this.CssClasses_.TOP_LEFT)&&this.outline_.classList.add(this.CssClasses_.TOP_LEFT),this.element_.classList.contains(this.CssClasses_.TOP_RIGHT)&&this.outline_.classList.add(this.CssClasses_.TOP_RIGHT),this.element_.classList.contains(this.CssClasses_.UNALIGNED)&&this.outline_.classList.add(this.CssClasses_.UNALIGNED),e.classList.add(this.CssClasses_.IS_UPGRADED)}},e.prototype.handleForClick_=function(e){if(this.element_&&this.forElement_){var t=this.forElement_.getBoundingClientRect(),s=this.forElement_.parentElement.getBoundingClientRect();this.element_.classList.contains(this.CssClasses_.UNALIGNED)||(this.element_.classList.contains(this.CssClasses_.BOTTOM_RIGHT)?(this.container_.style.right=s.right-t.right+"px",this.container_.style.top=this.forElement_.offsetTop+this.forElement_.offsetHeight+"px"):this.element_.classList.contains(this.CssClasses_.TOP_LEFT)?(this.container_.style.left=this.forElement_.offsetLeft+"px",this.container_.style.bottom=s.bottom-t.top+"px"):this.element_.classList.contains(this.CssClasses_.TOP_RIGHT)?(this.container_.style.right=s.right-t.right+"px",this.container_.style.bottom=s.bottom-t.top+"px"):(this.container_.style.left=this.forElement_.offsetLeft+"px",this.container_.style.top=this.forElement_.offsetTop+this.forElement_.offsetHeight+"px"))}this.toggle(e)},e.prototype.handleForKeyboardEvent_=function(e){if(this.element_&&this.container_&&this.forElement_){var t=this.element_.querySelectorAll("."+this.CssClasses_.ITEM+":not([disabled])");t&&t.length>0&&this.container_.classList.contains(this.CssClasses_.IS_VISIBLE)&&(e.keyCode===this.Keycodes_.UP_ARROW?(e.preventDefault(),t[t.length-1].focus()):e.keyCode===this.Keycodes_.DOWN_ARROW&&(e.preventDefault(),t[0].focus()))}},e.prototype.handleItemKeyboardEvent_=function(e){if(this.element_&&this.container_){var t=this.element_.querySelectorAll("."+this.CssClasses_.ITEM+":not([disabled])");if(t&&t.length>0&&this.container_.classList.contains(this.CssClasses_.IS_VISIBLE)){var s=Array.prototype.slice.call(t).indexOf(e.target);if(e.keyCode===this.Keycodes_.UP_ARROW)e.preventDefault(),s>0?t[s-1].focus():t[t.length-1].focus();else if(e.keyCode===this.Keycodes_.DOWN_ARROW)e.preventDefault(),t.length>s+1?t[s+1].focus():t[0].focus();else if(e.keyCode===this.Keycodes_.SPACE||e.keyCode===this.Keycodes_.ENTER){e.preventDefault();var i=new MouseEvent("mousedown");e.target.dispatchEvent(i),i=new MouseEvent("mouseup"),e.target.dispatchEvent(i),e.target.click()}else e.keyCode===this.Keycodes_.ESCAPE&&(e.preventDefault(),this.hide())}}},e.prototype.handleItemClick_=function(e){e.target.hasAttribute("disabled")?e.stopPropagation():(this.closing_=!0,window.setTimeout(function(e){this.hide(),this.closing_=!1}.bind(this),this.Constant_.CLOSE_TIMEOUT))},e.prototype.applyClip_=function(e,t){this.element_.classList.contains(this.CssClasses_.UNALIGNED)?this.element_.style.clip="":this.element_.classList.contains(this.CssClasses_.BOTTOM_RIGHT)?this.element_.style.clip="rect(0 "+t+"px 0 "+t+"px)":this.element_.classList.contains(this.CssClasses_.TOP_LEFT)?this.element_.style.clip="rect("+e+"px 0 "+e+"px 0)":this.element_.classList.contains(this.CssClasses_.TOP_RIGHT)?this.element_.style.clip="rect("+e+"px "+t+"px "+e+"px "+t+"px)":this.element_.style.clip=""},e.prototype.removeAnimationEndListener_=function(t){t.target.classList.remove(e.prototype.CssClasses_.IS_ANIMATING)},e.prototype.addAnimationEndListener_=function(){this.element_.addEventListener("transitionend",this.removeAnimationEndListener_),this.element_.addEventListener("webkitTransitionEnd",this.removeAnimationEndListener_)},e.prototype.show=function(e){if(this.element_&&this.container_&&this.outline_){var t=this.element_.getBoundingClientRect().height,s=this.element_.getBoundingClientRect().width;this.container_.style.width=s+"px",this.container_.style.height=t+"px",this.outline_.style.width=s+"px",this.outline_.style.height=t+"px";for(var i=this.Constant_.TRANSITION_DURATION_SECONDS*this.Constant_.TRANSITION_DURATION_FRACTION,n=this.element_.querySelectorAll("."+this.CssClasses_.ITEM),o=0;o<n.length;o++){var r=null;r=this.element_.classList.contains(this.CssClasses_.TOP_LEFT)||this.element_.classList.contains(this.CssClasses_.TOP_RIGHT)?(t-n[o].offsetTop-n[o].offsetHeight)/t*i+"s":n[o].offsetTop/t*i+"s",n[o].style.transitionDelay=r}this.applyClip_(t,s),window.requestAnimationFrame(function(){this.element_.classList.add(this.CssClasses_.IS_ANIMATING),this.element_.style.clip="rect(0 "+s+"px "+t+"px 0)",this.container_.classList.add(this.CssClasses_.IS_VISIBLE)}.bind(this)),this.addAnimationEndListener_();var a=function(t){t===e||this.closing_||t.target.parentNode===this.element_||(document.removeEventListener("click",a),this.hide())}.bind(this);document.addEventListener("click",a)}},e.prototype.show=e.prototype.show,e.prototype.hide=function(){if(this.element_&&this.container_&&this.outline_){for(var e=this.element_.querySelectorAll("."+this.CssClasses_.ITEM),t=0;t<e.length;t++)e[t].style.removeProperty("transition-delay");var s=this.element_.getBoundingClientRect(),i=s.height,n=s.width;this.element_.classList.add(this.CssClasses_.IS_ANIMATING),this.applyClip_(i,n),this.container_.classList.remove(this.CssClasses_.IS_VISIBLE),this.addAnimationEndListener_()}},e.prototype.hide=e.prototype.hide,e.prototype.toggle=function(e){this.container_.classList.contains(this.CssClasses_.IS_VISIBLE)?this.hide():this.show(e)},e.prototype.toggle=e.prototype.toggle,componentHandler.register({constructor:e,classAsString:"MaterialMenu",cssClass:"mdl-js-menu",widget:!0})}(),function(){"use strict";var e=function(e){this.element_=e,this.init()};window.MaterialCheckbox=e,e.prototype.Constant_={TINY_TIMEOUT:.001},e.prototype.CssClasses_={INPUT:"mdl-checkbox__input",BOX_OUTLINE:"mdl-checkbox__box-outline",FOCUS_HELPER:"mdl-checkbox__focus-helper",TICK_OUTLINE:"mdl-checkbox__tick-outline",RIPPLE_EFFECT:"mdl-js-ripple-effect",RIPPLE_IGNORE_EVENTS:"mdl-js-ripple-effect--ignore-events",RIPPLE_CONTAINER:"mdl-checkbox__ripple-container",RIPPLE_CENTER:"mdl-ripple--center",RIPPLE:"mdl-ripple",IS_FOCUSED:"is-focused",IS_DISABLED:"is-disabled",IS_CHECKED:"is-checked",IS_UPGRADED:"is-upgraded"},e.prototype.onChange_=function(e){this.updateClasses_()},e.prototype.onFocus_=function(e){this.element_.classList.add(this.CssClasses_.IS_FOCUSED)},e.prototype.onBlur_=function(e){this.element_.classList.remove(this.CssClasses_.IS_FOCUSED)},e.prototype.onMouseUp_=function(e){this.blur_()},e.prototype.updateClasses_=function(){this.checkDisabled(),this.checkToggleState()},e.prototype.blur_=function(){window.setTimeout(function(){this.inputElement_.blur()}.bind(this),this.Constant_.TINY_TIMEOUT)},e.prototype.checkToggleState=function(){this.inputElement_.checked?this.element_.classList.add(this.CssClasses_.IS_CHECKED):this.element_.classList.remove(this.CssClasses_.IS_CHECKED)},e.prototype.checkToggleState=e.prototype.checkToggleState,e.prototype.checkDisabled=function(){this.inputElement_.disabled?this.element_.classList.add(this.CssClasses_.IS_DISABLED):this.element_.classList.remove(this.CssClasses_.IS_DISABLED)},e.prototype.checkDisabled=e.prototype.checkDisabled,e.prototype.disable=function(){this.inputElement_.disabled=!0,this.updateClasses_()},e.prototype.disable=e.prototype.disable,e.prototype.enable=function(){this.inputElement_.disabled=!1,this.updateClasses_()},e.prototype.enable=e.prototype.enable,e.prototype.check=function(){this.inputElement_.checked=!0,this.updateClasses_()},e.prototype.check=e.prototype.check,e.prototype.uncheck=function(){this.inputElement_.checked=!1,this.updateClasses_()},e.prototype.uncheck=e.prototype.uncheck,e.prototype.init=function(){if(this.element_){this.inputElement_=this.element_.querySelector("."+this.CssClasses_.INPUT);var e=document.createElement("span");e.classList.add(this.CssClasses_.BOX_OUTLINE);var t=document.createElement("span");t.classList.add(this.CssClasses_.FOCUS_HELPER);var s=document.createElement("span");if(s.classList.add(this.CssClasses_.TICK_OUTLINE),e.appendChild(s),this.element_.appendChild(t),this.element_.appendChild(e),this.element_.classList.contains(this.CssClasses_.RIPPLE_EFFECT)){this.element_.classList.add(this.CssClasses_.RIPPLE_IGNORE_EVENTS),this.rippleContainerElement_=document.createElement("span"),this.rippleContainerElement_.classList.add(this.CssClasses_.RIPPLE_CONTAINER),this.rippleContainerElement_.classList.add(this.CssClasses_.RIPPLE_EFFECT),this.rippleContainerElement_.classList.add(this.CssClasses_.RIPPLE_CENTER),this.boundRippleMouseUp=this.onMouseUp_.bind(this),this.rippleContainerElement_.addEventListener("mouseup",this.boundRippleMouseUp);var i=document.createElement("span");i.classList.add(this.CssClasses_.RIPPLE),this.rippleContainerElement_.appendChild(i),this.element_.appendChild(this.rippleContainerElement_)}this.boundInputOnChange=this.onChange_.bind(this),this.boundInputOnFocus=this.onFocus_.bind(this),this.boundInputOnBlur=this.onBlur_.bind(this),this.boundElementMouseUp=this.onMouseUp_.bind(this),this.inputElement_.addEventListener("change",this.boundInputOnChange),this.inputElement_.addEventListener("focus",this.boundInputOnFocus),this.inputElement_.addEventListener("blur",this.boundInputOnBlur),this.element_.addEventListener("mouseup",this.boundElementMouseUp),this.updateClasses_(),this.element_.classList.add(this.CssClasses_.IS_UPGRADED)}},componentHandler.register({constructor:e,classAsString:"MaterialCheckbox",cssClass:"mdl-js-checkbox",widget:!0})}(),function(){"use strict";var e=function(e){this.element_=e,this.setDefaults_(),this.init()};window.MaterialSelectfield=e,e.prototype.CssClasses_={LABEL:"mdl-selectfield__label",SELECT:"mdl-selectfield__select",SELECTED_BOX:"mdl-selectfield__box",SELECTED_BOX_VALUE:"mdl-selectfield__box-value",LIST_OPTION_BOX:"mdl-selectfield__list-option-box",IS_DIRTY:"is-dirty",IS_FOCUSED:"is-focused",IS_DISABLED:"is-disabled",IS_INVALID:"is-invalid",IS_UPGRADED:"is-upgraded",IS_SELECTED:"is-selected"},e.prototype.Keycodes_={ENTER:13,ESCAPE:27,SPACE:32,UP_ARROW:38,DOWN_ARROW:40},e.prototype.setDefaults_=function(){this.options_=[],this.optionsMap_={},this.optionsArr_=[],this.closing_=!0,this.keyDownTimerId_=null,this.observer_=null},e.prototype.onFocus_=function(e){this.closing_&&this.show_(e)},e.prototype.onBlur_=function(e){!this.closing_&&this.hide_()},e.prototype.onSelected_=function(e){if(e.target&&"LI"==e.target.nodeName){var t,s,i=this.options_[e.target.getAttribute("data-value")];if(i.disabled)return e.stopPropagation(),!1;if(this.selectedOptionValue_.textContent=i.textContent,i.selected=!0,"function"==typeof window.Event?t=new Event("change",{bubbles:!0,cancelable:!0}):"function"==typeof document.createEvent&&(t=document.createEvent("HTMLEvents")).initEvent("change",!0,!0),t&&this.select_.dispatchEvent(t),""!==i.textContent)this.element_.classList.add(this.CssClasses_.IS_DIRTY),(s=this.listOptionBox_.querySelector("."+this.CssClasses_.IS_SELECTED))&&s.classList.remove(this.CssClasses_.IS_SELECTED),e.target.classList.add(this.CssClasses_.IS_SELECTED);else this.element_.classList.remove(this.CssClasses_.IS_DIRTY),(s=this.listOptionBox_.querySelector("."+this.CssClasses_.IS_SELECTED))&&s.classList.remove(this.CssClasses_.IS_SELECTED)}},e.prototype.onClick_=function(e){this.toggle(e)},e.prototype.update_=function(){if(this.options_&&this.options_.length>0)for(var e=0;e<this.options_.length;e++){var t=this.options_[e];if(t.selected&&""!==t.value){var s=!0;this.element_.classList.add(this.CssClasses_.IS_DIRTY),this.listOptionBox_.querySelector("."+this.CssClasses_.IS_SELECTED).classList.remove(this.CssClasses_.IS_SELECTED),this.listOptionBox_.querySelectorAll("LI")[e].classList.add(this.CssClasses_.IS_SELECTED)}}s||this.element_.classList.remove(this.CssClasses_.IS_DIRTY),this.checkDisabled(),this.checkValidity()},e.prototype.checkValidity=function(){this.select_.validity&&(this.select_.validity.valid?this.element_.classList.remove(this.CssClasses_.IS_INVALID):this.element_.classList.add(this.CssClasses_.IS_INVALID))},e.prototype.checkValidity=e.prototype.checkValidity,e.prototype.checkDisabled=function(){this.select_.disabled?this.element_.classList.add(this.CssClasses_.IS_DISABLED):this.element_.classList.remove(this.CssClasses_.IS_DISABLED)},e.prototype.checkDisabled=e.prototype.checkDisabled,e.prototype.disable=function(){this.select_.disabled=!0,this.update_()},e.prototype.disable=e.prototype.disable,e.prototype.enable=function(){this.select_.disabled=!1,this.update_()},e.prototype.enable=e.prototype.enable,e.prototype.isDescendant_=function(e,t){for(var s=t.parentNode;null!=s;){if(s==e)return!0;s=s.parentNode}return!1},e.prototype.toggle=function(e){this.element_.classList.contains(this.CssClasses_.IS_FOCUSED)?e.target&&"LI"==e.target.nodeName&&this.isDescendant_(this.listOptionBox_,e.target)?this.onSelected_(e):this.hide_():this.show_(e)},e.prototype.show_=function(e){if(this.checkDisabled(),!this.element_.classList.contains(this.CssClasses_.IS_DISABLED)){this.element_.classList.add(this.CssClasses_.IS_FOCUSED),this.closing_=!1,this.strSearch_="";var t=this.listOptionBox_&&this.listOptionBox_.querySelector("."+this.CssClasses_.IS_SELECTED);t&&(t.parentElement.parentElement.scrollTop=t.offsetTop),this.boundKeyDownHandler_=this.onKeyDown_.bind(this),this.boundClickDocHandler_=function(t){t===e||this.closing_||t.target.parentNode===this.element_||t.target.parentNode===this.selectedOption_||this.hide_()}.bind(this),document.addEventListener("keydown",this.boundKeyDownHandler_),document.addEventListener("click",this.boundClickDocHandler_)}},e.prototype.onKeyDown_=function(e){var t=this.listOptionBox_.querySelectorAll("li:not([disabled])");if(t&&t.length>0&&!this.closing_){var s,i=Array.prototype.slice.call(t).indexOf(this.listOptionBox_.querySelectorAll("."+this.CssClasses_.IS_SELECTED)[0]);if(e.keyCode===this.Keycodes_.UP_ARROW||e.keyCode===this.Keycodes_.DOWN_ARROW)-1!=i&&t[i].classList.remove(this.CssClasses_.IS_SELECTED),e.keyCode===this.Keycodes_.UP_ARROW?(e.preventDefault(),s=i>0?t[i-1]:t[t.length-1]):(e.preventDefault(),s=t.length>i+1?t[i+1]:t[0]),s&&(s.classList.add(this.CssClasses_.IS_SELECTED),this.listOptionBox_.scrollTop=s.offsetTop,this.lastSelectedItem_=s);else if(e.keyCode!==this.Keycodes_.SPACE&&e.keyCode!==this.Keycodes_.ENTER||!this.lastSelectedItem_){if(e.keyCode===this.Keycodes_.ESCAPE){e.preventDefault(),document.createEvent?(r=document.createEvent("MouseEvent")).initMouseEvent("click",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null):r=new MouseEvent("mousedown"),document.body.dispatchEvent(r),document.createEvent||(r=new MouseEvent("mouseup"),document.body.dispatchEvent(r)),document.body.click()}else if(this.validKeyCode_(e.keyCode)){var n=e.which||e.keyCode;this.strSearch_+=String.fromCharCode(n),this.keyDownTimerId_&&clearTimeout(this.keyDownTimerId_),this.keyDownTimerId_=setTimeout(function(){this.keyDownTimerId_=null,this.strSearch_=""}.bind(this),300);var o=this.searchByStrIndex_(0);o>-1&&(-1!=i&&t[i].classList.remove(this.CssClasses_.IS_SELECTED),(s=t[o]).classList.add(this.CssClasses_.IS_SELECTED),this.listOptionBox_.scrollTop=s.offsetTop,this.lastSelectedItem_=s)}}else{var r;e.preventDefault(),document.createEvent?(r=document.createEvent("MouseEvent")).initMouseEvent("click",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null):r=new MouseEvent("mousedown"),this.lastSelectedItem_.dispatchEvent(r),document.createEvent||(r=new MouseEvent("mouseup"),this.lastSelectedItem_.dispatchEvent(r))}}},e.prototype.searchByStrIndex_=function(e){for(var t=this.strSearch_,s=new RegExp("^"+t+"."),i=-1,n=this.optionsArr_,o=0;o<n.length;o++)if(s.test(n[o])){i=o;break}return-1!=i?this.optionsMap_[this.optionsArr_[i]]:-1},e.prototype.validKeyCode_=function(e){return e>47&&e<58||32==e||13==e||e>64&&e<91||e>95&&e<112||e>185&&e<193||e>218&&e<223},e.prototype.hide_=function(){this.element_.classList.remove(this.CssClasses_.IS_FOCUSED),this.closing_=!0,this.strSearch_="",this.boundClickDocHandler_&&document.removeEventListener("click",this.boundClickDocHandler_),this.boundKeyDownHandler_&&document.removeEventListener("keydown",this.boundKeyDownHandler_),this.update_()},e.prototype.init=function(){if(this.element_){this.element_.classList.remove(this.CssClasses_.IS_DIRTY),this.lastSelectedItem_=null,this.label_=this.element_.querySelector("."+this.CssClasses_.LABEL),this.select_=this.element_.querySelector("."+this.CssClasses_.SELECT);var e=document.createElement("div");e.classList.add(this.CssClasses_.SELECTED_BOX),e.tabIndex=1,this.selectedOption_=e;var t=document.createElement("i");t.classList.add("material-icons"),t.tabIndex=-1,t.textContent="arrow_drop_down",e.appendChild(t);var s=document.createElement("span");s.classList.add(this.CssClasses_.SELECTED_BOX_VALUE),s.tabIndex=-1,e.appendChild(s),this.selectedOptionValue_=s,this.element_.appendChild(this.selectedOption_);var i=this.element_.classList.contains(this.CssClasses_.IS_INVALID);this.makeElements_(),this.boundClickHandler=this.onClick_.bind(this),this.boundFocusHandler=this.onFocus_.bind(this),this.boundBlurHandler=this.onBlur_.bind(this),this.element_.addEventListener("click",this.boundClickHandler),this.select_.addEventListener("focus",this.boundFocusHandler),this.select_.addEventListener("blur",this.boundBlurHandler),i&&this.element_.classList.add(this.CssClasses_.IS_INVALID),this.checkDisabled()}},e.prototype.refreshOptions=function(){this.mdlDowngrade_(),this.setDefaults_(),this.init()},e.prototype.clearElements_=function(){},e.prototype.makeElements_=function(){if(this.select_&&(this.options_=this.select_.querySelectorAll("option"),this.select_.style.opacity="0",this.select_.style.zIndex="-1",0==this.options_.length&&(this.options_=[document.createElement("option")]),this.options_.length)){var e=document.createElement("div"),t='<ul tabindex="-1">',s="";e.classList.add(this.CssClasses_.LIST_OPTION_BOX),e.tabIndex="-1";for(var i=0;i<this.options_.length;i++){var n=this.options_[i],o=(n.textContent||"").toUpperCase().replace(/( )|(\n)/g,""),r="";this.optionsMap_[o]=i,this.optionsArr_.push(o),n.selected&&""!==n.textContent&&(this.element_.classList.add(this.CssClasses_.IS_DIRTY),this.selectedOptionValue_.textContent=n.textContent,r+=this.CssClasses_.IS_SELECTED),n.disabled&&(r+=""!=r?" "+this.CssClasses_.IS_DISABLED:this.CssClasses_.IS_DISABLED),s+='<li class="'+r+'" data-value="'+i+'" tabindex="-1">'+n.textContent+"</li>"}t+=s+"</ul>",e.innerHTML=t,this.element_.appendChild(e),this.listOptionBox_=e,window.MutationObserver&&(this.observer_=new MutationObserver(function(e){e.forEach(function(e){"childList"==e.type&&this.refreshOptions()}.bind(this))}.bind(this)),this.observer_.observe(this.select_,{attributes:!0,childList:!0,characterData:!0}))}},e.prototype.mdlDowngrade_=function(){this.element_.removeEventListener("click",this.boundClickHandler),this.select_.removeEventListener("focus",this.boundFocusHandler),this.select_.removeEventListener("blur",this.boundBlurHandler),this.listOptionBox_&&this.element_.removeChild(this.listOptionBox_),this.selectedOption_&&this.element_.removeChild(this.selectedOption_),this.element_.removeAttribute("data-upgraded"),this.select_.style.opacity="1",this.select_.style.zIndex="inherit",this.observer_&&this.observer_.disconnect()},e.prototype.mdlDowngrade=e.prototype.mdlDowngrade_,e.prototype.mdlDowngrade=e.prototype.mdlDowngrade,componentHandler.register({constructor:e,classAsString:"MaterialSelectfield",cssClass:"mdl-js-selectfield",widget:!0})}(),function(){"use strict";var e=function(e){this.element_=e,this.init()};window.MaterialRipple=e,e.prototype.Constant_={INITIAL_SCALE:"scale(0.0001, 0.0001)",INITIAL_SIZE:"1px",INITIAL_OPACITY:"0.4",FINAL_OPACITY:"0",FINAL_SCALE:""},e.prototype.CssClasses_={RIPPLE_CENTER:"mdl-ripple--center",RIPPLE_EFFECT_IGNORE_EVENTS:"mdl-js-ripple-effect--ignore-events",RIPPLE:"mdl-ripple",IS_ANIMATING:"is-animating",IS_VISIBLE:"is-visible"},e.prototype.downHandler_=function(e){if(!this.rippleElement_.style.width&&!this.rippleElement_.style.height){var t=this.element_.getBoundingClientRect();this.boundHeight=t.height,this.boundWidth=t.width,this.rippleSize_=2*Math.sqrt(t.width*t.width+t.height*t.height)+2,this.rippleElement_.style.width=this.rippleSize_+"px",this.rippleElement_.style.height=this.rippleSize_+"px"}if(this.rippleElement_.classList.add(this.CssClasses_.IS_VISIBLE),"mousedown"===e.type&&this.ignoringMouseDown_)this.ignoringMouseDown_=!1;else{if("touchstart"===e.type&&(this.ignoringMouseDown_=!0),this.getFrameCount()>0)return;this.setFrameCount(1);var s,i,n=e.currentTarget.getBoundingClientRect();if(0===e.clientX&&0===e.clientY)s=Math.round(n.width/2),i=Math.round(n.height/2);else{var o=e.clientX?e.clientX:e.touches[0].clientX,r=e.clientY?e.clientY:e.touches[0].clientY;s=Math.round(o-n.left),i=Math.round(r-n.top)}this.setRippleXY(s,i),this.setRippleStyles(!0),requestAnimationFrame(this.animFrameHandler.bind(this))}},e.prototype.upHandler_=function(e){e&&2!==e.detail&&window.setTimeout(function(){this.rippleElement_.classList.remove(this.CssClasses_.IS_VISIBLE)}.bind(this),0)},e.prototype.init=function(){if(this.element_){var e=this.element_.classList.contains(this.CssClasses_.RIPPLE_CENTER);this.element_.classList.contains(this.CssClasses_.RIPPLE_EFFECT_IGNORE_EVENTS)||(this.rippleElement_=this.element_.querySelector("."+this.CssClasses_.RIPPLE),this.frameCount_=0,this.rippleSize_=0,this.x_=0,this.y_=0,this.ignoringMouseDown_=!1,this.boundDownHandler=this.downHandler_.bind(this),this.element_.addEventListener("mousedown",this.boundDownHandler),this.element_.addEventListener("touchstart",this.boundDownHandler),this.boundUpHandler=this.upHandler_.bind(this),this.element_.addEventListener("mouseup",this.boundUpHandler),this.element_.addEventListener("mouseleave",this.boundUpHandler),this.element_.addEventListener("touchend",this.boundUpHandler),this.element_.addEventListener("blur",this.boundUpHandler),this.getFrameCount=function(){return this.frameCount_},this.setFrameCount=function(e){this.frameCount_=e},this.getRippleElement=function(){return this.rippleElement_},this.setRippleXY=function(e,t){this.x_=e,this.y_=t},this.setRippleStyles=function(t){if(null!==this.rippleElement_){var s,i,n="translate("+this.x_+"px, "+this.y_+"px)";t?i=this.Constant_.INITIAL_SCALE:(i=this.Constant_.FINAL_SCALE,e&&(n="translate("+this.boundWidth/2+"px, "+this.boundHeight/2+"px)")),s="translate(-50%, -50%) "+n+i,this.rippleElement_.style.webkitTransform=s,this.rippleElement_.style.msTransform=s,this.rippleElement_.style.transform=s,t?this.rippleElement_.classList.remove(this.CssClasses_.IS_ANIMATING):this.rippleElement_.classList.add(this.CssClasses_.IS_ANIMATING)}},this.animFrameHandler=function(){this.frameCount_-- >0?requestAnimationFrame(this.animFrameHandler.bind(this)):this.setRippleStyles(!1)})}},componentHandler.register({constructor:e,classAsString:"MaterialRipple",cssClass:"mdl-js-ripple-effect",widget:!1})}(),function(){"use strict";var e=function(e){if(this.element_=e,this.textElement_=this.element_.querySelector("."+this.cssClasses_.MESSAGE),this.actionElement_=this.element_.querySelector("."+this.cssClasses_.ACTION),!this.textElement_)throw new Error("There must be a message element for a snackbar.");if(!this.actionElement_)throw new Error("There must be an action element for a snackbar.");this.active=!1,this.actionHandler_=void 0,this.message_=void 0,this.actionText_=void 0,this.timeoutID_=void 0,this.queuedNotifications_=[],this.setActionHidden_(!0)};window.MaterialSnackbar=e,e.prototype.Constant_={ANIMATION_LENGTH:250},e.prototype.cssClasses_={SNACKBAR:"mdl-snackbar",MESSAGE:"mdl-snackbar__text",ACTION:"mdl-snackbar__action",ACTIVE:"mdl-snackbar--active"},e.prototype.displaySnackbar_=function(){this.element_.setAttribute("aria-hidden","true"),this.actionHandler_&&(this.actionElement_.textContent=this.actionText_,this.actionElement_.addEventListener("click",this.actionHandler_),this.setActionHidden_(!1)),this.textElement_.textContent=this.message_,this.element_.classList.add(this.cssClasses_.ACTIVE),this.element_.setAttribute("aria-hidden","false"),this.timeoutID_=setTimeout(this.cleanup_.bind(this),this.timeout_)},e.prototype.showSnackbar=function(e){if(void 0===e)throw new Error("Please provide a data object with at least a message to display.");if(void 0===e.message)throw new Error("Please provide a message to be displayed.");if(e.actionHandler&&!e.actionText)throw new Error("Please provide action text with the handler.");this.active?this.queuedNotifications_.push(e):(this.active=!0,this.message_=e.message,e.timeout?this.timeout_=e.timeout:this.timeout_=2750,e.actionHandler&&(this.actionHandler_=e.actionHandler),e.actionText&&(this.actionText_=e.actionText),this.displaySnackbar_())},e.prototype.showSnackbar=e.prototype.showSnackbar,e.prototype.hideSnackbar=function(){this.active&&"number"==typeof this.timeoutID_&&(clearTimeout(this.timeoutID_),this.cleanup_())},e.prototype.hideSnackbar=e.prototype.hideSnackbar,e.prototype.checkQueue_=function(){this.queuedNotifications_.length>0&&this.showSnackbar(this.queuedNotifications_.shift())},e.prototype.cleanup_=function(){this.element_.classList.remove(this.cssClasses_.ACTIVE),setTimeout(function(){this.element_.setAttribute("aria-hidden","true"),this.textElement_.textContent="",Boolean(this.actionElement_.getAttribute("aria-hidden"))||(this.setActionHidden_(!0),this.actionElement_.textContent="",this.actionElement_.removeEventListener("click",this.actionHandler_)),this.actionHandler_=void 0,this.message_=void 0,this.actionText_=void 0,this.timeoutID_=void 0,this.active=!1,this.checkQueue_()}.bind(this),this.Constant_.ANIMATION_LENGTH)},e.prototype.setActionHidden_=function(e){e?this.actionElement_.setAttribute("aria-hidden","true"):this.actionElement_.removeAttribute("aria-hidden")},componentHandler.register({constructor:e,classAsString:"MaterialSnackbar",cssClass:"mdl-js-snackbar",widget:!0})}(),function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).store=e()}}(function(){return function e(t,s,i){function n(r,a){if(!s[r]){if(!t[r]){var l="function"==typeof require&&require;if(!a&&l)return l(r,!0);if(o)return o(r,!0);var d=new Error("Cannot find module '"+r+"'");throw d.code="MODULE_NOT_FOUND",d}var h=s[r]={exports:{}};t[r][0].call(h.exports,function(e){var s=t[r][1][e];return n(s||e)},h,h.exports,e,t,s,i)}return s[r].exports}for(var o="function"==typeof require&&require,r=0;r<i.length;r++)n(i[r]);return n}({1:[function(e,t,s){(function(e){"use strict";t.exports=function(){var t,s={},i="undefined"!=typeof window?window:e,n=i.document,o="localStorage";if(s.disabled=!1,s.version="1.3.20",s.set=function(e,t){},s.get=function(e,t){},s.has=function(e){return void 0!==s.get(e)},s.remove=function(e){},s.clear=function(){},s.transact=function(e,t,i){null==i&&(i=t,t=null),null==t&&(t={});var n=s.get(e,t);i(n),s.set(e,n)},s.getAll=function(){},s.forEach=function(){},s.serialize=function(e){return JSON.stringify(e)},s.deserialize=function(e){if("string"==typeof e)try{return JSON.parse(e)}catch(t){return e||void 0}},function(){try{return o in i&&i[o]}catch(e){return!1}}())t=i[o],s.set=function(e,i){return void 0===i?s.remove(e):(t.setItem(e,s.serialize(i)),i)},s.get=function(e,i){var n=s.deserialize(t.getItem(e));return void 0===n?i:n},s.remove=function(e){t.removeItem(e)},s.clear=function(){t.clear()},s.getAll=function(){var e={};return s.forEach(function(t,s){e[t]=s}),e},s.forEach=function(e){for(var i=0;i<t.length;i++){var n=t.key(i);e(n,s.get(n))}};else if(n&&n.documentElement.addBehavior){var r,a;try{(a=new ActiveXObject("htmlfile")).open(),a.write('<script>document.w=window<\/script><iframe src="/favicon.ico"></iframe>'),a.close(),r=a.w.frames[0].document,t=r.createElement("div")}catch(e){t=n.createElement("div"),r=n.body}var l=function(e){return function(){var i=Array.prototype.slice.call(arguments,0);i.unshift(t),r.appendChild(t),t.addBehavior("#default#userData"),t.load(o);var n=e.apply(s,i);return r.removeChild(t),n}},d=new RegExp("[!\"#$%&'()*+,/\\\\:;<=>?@[\\]^`{|}~]","g"),h=function(e){return e.replace(/^d/,"___$&").replace(d,"___")};s.set=l(function(e,t,i){return t=h(t),void 0===i?s.remove(t):(e.setAttribute(t,s.serialize(i)),e.save(o),i)}),s.get=l(function(e,t,i){t=h(t);var n=s.deserialize(e.getAttribute(t));return void 0===n?i:n}),s.remove=l(function(e,t){t=h(t),e.removeAttribute(t),e.save(o)}),s.clear=l(function(e){var t=e.XMLDocument.documentElement.attributes;e.load(o);for(var s=t.length-1;s>=0;s--)e.removeAttribute(t[s].name);e.save(o)}),s.getAll=function(e){var t={};return s.forEach(function(e,s){t[e]=s}),t},s.forEach=l(function(e,t){for(var i,n=e.XMLDocument.documentElement.attributes,o=0;i=n[o];++o)t(i.name,s.deserialize(e.getAttribute(i.name)))})}try{var c="__storejs__";s.set(c,c),s.get(c)!=c&&(s.disabled=!0),s.remove(c)}catch(e){s.disabled=!0}return s.enabled=!s.disabled,s}()}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}]},{},[1])(1)});var requestCaptcha,signInCaptcha,jqOAuth=function(e){this.options={},this.data={},this.intercept=!1,this.refreshing=!1,this.buffer=[],this.currentRequests=[],this._resetOptions(),this._setupInterceptor(),$.extend(this.options,e),this._hasStoredData()?(this._getStoredData(),this.hasAccessToken()&&this.login(this.data.accessToken,this.data.refreshToken)):(this._resetData(),this._updateStorage()),null!==e.csrfToken&&this._setCsrfHeader()};function onloadCallback(){document.getElementById("signInCaptcha")&&(window.signInCaptcha=grecaptcha.render("signInCaptcha",{sitekey:reSITEKEY,callback:captchaCallbackSI})),window.requestCaptcha=grecaptcha.render("passCaptcha",{sitekey:reSITEKEY,callback:captchaCallbackRQ})}function captchaCallbackSI(){captchaValidator(window.signInCaptcha,"#signInCaptcha")}function captchaCallbackRQ(){captchaValidator(window.requestCaptcha,"#passCaptcha")}function captchaValidator(e,t){var s=captchaValidation(e),i=$(t);return i.parent().removeClass("has-error error-required"),s||i.parent().addClass("has-error error-required"),s}function captchaValidation(e){return grecaptcha.getResponse(e).length>0}jqOAuth.prototype.getAccessToken=function(){return this.data.accessToken},jqOAuth.prototype.hasAccessToken=function(){return null!==this.data.accessToken},jqOAuth.prototype.logout=function(){this._resetData(),this._updateStorage(),this._deactivateInterceptor(),this._removeAjaxHeader("Authorization"),this._fireEvent("logout")},jqOAuth.prototype.login=function(e,t){this.setAccessToken(e,t),this._activateInterceptor(),this._fireEvent("login")},jqOAuth.prototype.setAccessToken=function(e,t){this.data.accessToken=e,this.data.refreshToken=t,this._setAuthorizationHeader(),this._updateStorage()},jqOAuth.prototype.setCsrfToken=function(e){this.options.csrfToken=e,this._setCsrfHeader()},jqOAuth.prototype._activateInterceptor=function(){this.intercept=!0},jqOAuth.prototype._addToBuffer=function(e,t){this.buffer.push({deferred:t,settings:e})},jqOAuth.prototype._clearBuffer=function(){this.buffer=[]},jqOAuth.prototype._deactivateInterceptor=function(){this.intercept=!1},jqOAuth.prototype._fireBuffer=function(){var e,t=this,s=[];for(var i in this.buffer)e=this.buffer[i].deferred,this.buffer[i].settings.refreshRetry=!0,this.buffer[i].settings.headers.Authorization=$.ajaxSettings.headers.Authorization,s.push($.ajax(this.buffer[i].settings).then(e.resolve,e.reject));this._clearBuffer(),$.when.apply($,s).done(function(){t._setRefreshingFlag(!1)}).fail(function(){t._setRefreshingFlag(!1),t.logout()})},jqOAuth.prototype._fireEvent=function(e){if(this._hasEvent(e))return this.options.events[e]()},jqOAuth.prototype._getStoredData=function(){$.extend(this.data,store.get(this.options.tokenName))},jqOAuth.prototype._hasEvent=function(e){return void 0!==this.options.events[e]&&"function"==typeof this.options.events[e]},jqOAuth.prototype._hasStoredData=function(){return void 0!==store.get(this.options.tokenName)},jqOAuth.prototype._isAjaxHeadersInitialized=function(){return void 0!==$.ajaxSettings.headers},jqOAuth.prototype._removeAjaxHeader=function(e){if(!this._isAjaxHeadersInitialized())return!0;$.ajaxSettings.headers[e]=void 0},jqOAuth.prototype._removeAllAjaxHeaders=function(){this._removeAjaxHeader("Authorization"),this._removeAjaxHeader("X-CSRF-Token")},jqOAuth.prototype._resetData=function(){this.data={accessToken:null}},jqOAuth.prototype._resetOptions=function(){this.options={bufferInterval:25,bufferWaitLimit:500,csrfToken:null,events:{},tokenName:"jquery.oauth"},this._removeAllAjaxHeaders()},jqOAuth.prototype._setAjaxHeader=function(e,t){this._isAjaxHeadersInitialized()||($.ajaxSettings.headers={}),$.ajaxSettings.headers[e]=t},jqOAuth.prototype._setAuthorizationHeader=function(){this._setAjaxHeader("Authorization","Bearer "+this.data.accessToken)},jqOAuth.prototype._setCsrfHeader=function(){this._setAjaxHeader("X-CSRF-Token",this.options.csrfToken)},jqOAuth.prototype._setRefreshingFlag=function(e){this.refreshing=e},jqOAuth.prototype._setupInterceptor=function(){var e=this;$.ajaxPrefilter(function(t,s,i){if(!0!==t.refreshRetry){var n=s.data;void 0!==s.data?"[object String]"===Object.prototype.toString.call(s.data)&&(n=$.deparam(s.data)):n={},"/api/pupils/request"!==t.url&&"/api/pupils/diplom"!==t.url&&(t.data=$.param($.extend(n,{client_id:"mobileV1",client_secret:"abc123456"})));var o=$.Deferred();return e.currentRequests.push(t.url),i.always(function(){e.currentRequests.splice($.inArray(t.url,e.currentRequests),1)}),i.done(o.resolve),i.fail(function(){var s=Array.prototype.slice.call(arguments);e.intercept&&401===i.status&&e._hasEvent("tokenExpiration")?(e._addToBuffer(t,o),e.refreshing||(e._setRefreshingFlag(!0),e._fireEvent("tokenExpiration").success(function(){var t=0;e.interval=setInterval(function(){t+=e.options.bufferInterval,(0===e.currentRequests.length||t>=e.options.bufferWaitLimit)&&(clearInterval(e.interval),e._fireBuffer())},e.options.bufferInterval)}).fail(function(){e.logout()}))):o.rejectWith(i,s)}),o.promise(i)}})},jqOAuth.prototype._updateStorage=function(){store.set(this.options.tokenName,this.data)},function(){var e=window.CustomEvent;function t(e){for(;e;){if("dialog"===e.localName)return e;e=e.parentElement}return null}function s(e){e&&e.blur&&e!=document.body&&e.blur()}function i(e,t){for(var s=0;s<e.length;++s)if(e[s]==t)return!0;return!1}function n(e){if(this.dialog_=e,this.replacedStyleTop_=!1,this.openAsModal_=!1,e.hasAttribute("role")||e.setAttribute("role","dialog"),e.show=this.show.bind(this),e.showModal=this.showModal.bind(this),e.close=this.close.bind(this),"returnValue"in e||(e.returnValue=""),"MutationObserver"in window){new MutationObserver(this.maybeHideModal.bind(this)).observe(e,{attributes:!0,attributeFilter:["open"]})}else{var t,s=!1,i=function(){s?this.downgradeModal():this.maybeHideModal(),s=!1}.bind(this),n=function(e){s|="DOMNodeRemoved"===e.type.substr(0,"DOMNodeRemoved".length),window.clearTimeout(t),t=window.setTimeout(i,0)};["DOMAttrModified","DOMNodeRemoved","DOMNodeRemovedFromDocument"].forEach(function(t){e.addEventListener(t,n)})}Object.defineProperty(e,"open",{set:this.setOpen.bind(this),get:e.hasAttribute.bind(e,"open")}),this.backdrop_=document.createElement("div"),this.backdrop_.className="backdrop",this.backdrop_.addEventListener("click",this.backdropClick_.bind(this))}e&&"object"!=typeof e||((e=function(e,t){t=t||{};var s=document.createEvent("CustomEvent");return s.initCustomEvent(e,!!t.bubbles,!!t.cancelable,t.detail||null),s}).prototype=window.Event.prototype),n.prototype={get dialog(){return this.dialog_},maybeHideModal:function(){this.dialog_.hasAttribute("open")&&document.body.contains(this.dialog_)||this.downgradeModal()},downgradeModal:function(){this.openAsModal_&&(this.openAsModal_=!1,this.dialog_.style.zIndex="",this.replacedStyleTop_&&(this.dialog_.style.top="",this.replacedStyleTop_=!1),this.backdrop_.parentNode&&this.backdrop_.parentNode.removeChild(this.backdrop_),o.dm.removeDialog(this))},setOpen:function(e){e?this.dialog_.hasAttribute("open")||this.dialog_.setAttribute("open",""):(this.dialog_.removeAttribute("open"),this.maybeHideModal())},backdropClick_:function(e){if(this.dialog_.hasAttribute("tabindex"))this.dialog_.focus();else{var t=document.createElement("div");this.dialog_.insertBefore(t,this.dialog_.firstChild),t.tabIndex=-1,t.focus(),this.dialog_.removeChild(t)}var s=document.createEvent("MouseEvents");s.initMouseEvent(e.type,e.bubbles,e.cancelable,window,e.detail,e.screenX,e.screenY,e.clientX,e.clientY,e.ctrlKey,e.altKey,e.shiftKey,e.metaKey,e.button,e.relatedTarget),this.dialog_.dispatchEvent(s),e.stopPropagation()},focus_:function(){var e=this.dialog_.querySelector("[autofocus]:not([disabled])");if(!e&&this.dialog_.tabIndex>=0&&(e=this.dialog_),!e){var t=["button","input","keygen","select","textarea"].map(function(e){return e+":not([disabled])"});t.push('[tabindex]:not([disabled]):not([tabindex=""])'),e=this.dialog_.querySelector(t.join(", "))}s(document.activeElement),e&&e.focus()},updateZIndex:function(e,t){if(e<t)throw new Error("dialogZ should never be < backdropZ");this.dialog_.style.zIndex=e,this.backdrop_.style.zIndex=t},show:function(){this.dialog_.open||(this.setOpen(!0),this.focus_())},showModal:function(){if(this.dialog_.hasAttribute("open"))throw new Error("Failed to execute 'showModal' on dialog: The element is already open, and therefore cannot be opened modally.");if(!document.body.contains(this.dialog_))throw new Error("Failed to execute 'showModal' on dialog: The element is not in a Document.");if(!o.dm.pushDialog(this))throw new Error("Failed to execute 'showModal' on dialog: There are too many open modal dialogs.");(function(e){for(;e&&e!==document.body;){var t=window.getComputedStyle(e),s=function(e,s){return!(void 0===t[e]||t[e]===s)};if(t.opacity<1||s("zIndex","auto")||s("transform","none")||s("mixBlendMode","normal")||s("filter","none")||s("perspective","none")||"isolate"===t.isolation||"fixed"===t.position||"touch"===t.webkitOverflowScrolling)return!0;e=e.parentElement}return!1})(this.dialog_.parentElement)&&console.warn("A dialog is being shown inside a stacking context. This may cause it to be unusable. For more information, see this link: https://github.com/GoogleChrome/dialog-polyfill/#stacking-context"),this.setOpen(!0),this.openAsModal_=!0,o.needsCentering(this.dialog_)?(o.reposition(this.dialog_),this.replacedStyleTop_=!0):this.replacedStyleTop_=!1,this.dialog_.parentNode.insertBefore(this.backdrop_,this.dialog_.nextSibling),this.focus_()},close:function(t){if(!this.dialog_.hasAttribute("open"))throw new Error("Failed to execute 'close' on dialog: The element does not have an 'open' attribute, and therefore cannot be closed.");this.setOpen(!1),void 0!==t&&(this.dialog_.returnValue=t);var s=new e("close",{bubbles:!1,cancelable:!1});this.dialog_.dispatchEvent(s)}};var o={};o.reposition=function(e){var t=document.body.scrollTop||document.documentElement.scrollTop,s=t+(window.innerHeight-e.offsetHeight)/2;e.style.top=Math.max(t,s)+"px"},o.isInlinePositionSetByStylesheet=function(e){for(var t=0;t<document.styleSheets.length;++t){var s=document.styleSheets[t],n=null;try{n=s.cssRules}catch(e){}if(n)for(var o=0;o<n.length;++o){var r=n[o],a=null;try{a=document.querySelectorAll(r.selectorText)}catch(e){}if(a&&i(a,e)){var l=r.style.getPropertyValue("top"),d=r.style.getPropertyValue("bottom");if(l&&"auto"!=l||d&&"auto"!=d)return!0}}}return!1},o.needsCentering=function(e){return"absolute"==window.getComputedStyle(e).position&&(!("auto"!=e.style.top&&""!=e.style.top||"auto"!=e.style.bottom&&""!=e.style.bottom)&&!o.isInlinePositionSetByStylesheet(e))},o.forceRegisterDialog=function(e){if(e.showModal&&console.warn("This browser already supports <dialog>, the polyfill may not work correctly",e),"dialog"!==e.localName)throw new Error("Failed to register dialog: The element is not a dialog.");new n(e)},o.registerDialog=function(e){e.showModal||o.forceRegisterDialog(e)},o.DialogManager=function(){this.pendingDialogStack=[];var e=this.checkDOM_.bind(this);this.overlay=document.createElement("div"),this.overlay.className="_dialog_overlay",this.overlay.addEventListener("click",function(t){this.forwardTab_=void 0,t.stopPropagation(),e([])}.bind(this)),this.handleKey_=this.handleKey_.bind(this),this.handleFocus_=this.handleFocus_.bind(this),this.zIndexLow_=1e5,this.zIndexHigh_=100150,this.forwardTab_=void 0,"MutationObserver"in window&&(this.mo_=new MutationObserver(function(t){var s=[];t.forEach(function(e){for(var t,i=0;t=e.removedNodes[i];++i)if(t instanceof Element)if("dialog"===t.localName)s.push(t);else{var n=t.querySelector("dialog");n&&s.push(n)}}),s.length&&e(s)}))},o.DialogManager.prototype.blockDocument=function(){document.documentElement.addEventListener("focus",this.handleFocus_,!0),document.addEventListener("keydown",this.handleKey_),this.mo_&&this.mo_.observe(document,{childList:!0,subtree:!0})},o.DialogManager.prototype.unblockDocument=function(){document.documentElement.removeEventListener("focus",this.handleFocus_,!0),document.removeEventListener("keydown",this.handleKey_),this.mo_&&this.mo_.disconnect()},o.DialogManager.prototype.updateStacking=function(){for(var e,t=this.zIndexHigh_,s=0;e=this.pendingDialogStack[s];++s)e.updateZIndex(--t,--t),0===s&&(this.overlay.style.zIndex=--t);var i=this.pendingDialogStack[0];i?(i.dialog.parentNode||document.body).appendChild(this.overlay):this.overlay.parentNode&&this.overlay.parentNode.removeChild(this.overlay)},o.DialogManager.prototype.containedByTopDialog_=function(e){for(;e=t(e);){for(var s,i=0;s=this.pendingDialogStack[i];++i)if(s.dialog===e)return 0===i;e=e.parentElement}return!1},o.DialogManager.prototype.handleFocus_=function(e){if(!this.containedByTopDialog_(e.target)&&(e.preventDefault(),e.stopPropagation(),s(e.target),void 0!==this.forwardTab_)){var t=this.pendingDialogStack[0];return t.dialog.compareDocumentPosition(e.target)&Node.DOCUMENT_POSITION_PRECEDING&&(this.forwardTab_?t.focus_():document.documentElement.focus()),!1}},o.DialogManager.prototype.handleKey_=function(t){if(this.forwardTab_=void 0,27===t.keyCode){t.preventDefault(),t.stopPropagation();var s=new e("cancel",{bubbles:!1,cancelable:!0}),i=this.pendingDialogStack[0];i&&i.dialog.dispatchEvent(s)&&i.dialog.close()}else 9===t.keyCode&&(this.forwardTab_=!t.shiftKey)},o.DialogManager.prototype.checkDOM_=function(e){this.pendingDialogStack.slice().forEach(function(t){-1!==e.indexOf(t.dialog)?t.downgradeModal():t.maybeHideModal()})},o.DialogManager.prototype.pushDialog=function(e){var t=(this.zIndexHigh_-this.zIndexLow_)/2-1;return!(this.pendingDialogStack.length>=t)&&(1===this.pendingDialogStack.unshift(e)&&this.blockDocument(),this.updateStacking(),!0)},o.DialogManager.prototype.removeDialog=function(e){var t=this.pendingDialogStack.indexOf(e);-1!=t&&(this.pendingDialogStack.splice(t,1),0===this.pendingDialogStack.length&&this.unblockDocument(),this.updateStacking())},o.dm=new o.DialogManager,document.addEventListener("submit",function(e){var s=e.target;if(s&&s.hasAttribute("method")&&"dialog"===s.getAttribute("method").toLowerCase()){e.preventDefault();var i=t(e.target);if(i){var n,o=["BUTTON","INPUT"];[document.activeElement,e.explicitOriginalTarget].some(function(t){if(t&&t.form==e.target&&-1!=o.indexOf(t.nodeName.toUpperCase()))return n=t.value,!0}),i.close(n)}}},!0),o.forceRegisterDialog=o.forceRegisterDialog,o.registerDialog=o.registerDialog,"function"==typeof define&&"amd"in define?define(function(){return o}):"object"==typeof module&&"object"==typeof module.exports?module.exports=o:window.dialogPolyfill=o}(),ready(function(){var e,t,s="/api/oauth/token",i="/api/pupils/register",n="/api/oauth/requestPassword",o=/^(([^<>()\[\]\\.,;:\s@\"]+(\.[^<>()\[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,r=new function(){var e=$("#signInView"),t=!1,n=!1;function l(){var e={};t=!0,c()&&($("#userNotFoundError").removeClass("visibleView").addClass("hiddenView"),e={grant_type:"password",username:$("#loginEmailInput").val().toLowerCase(),password:$("#loginPassInput").val()},u(s,e))}function d(){var e;n=!0,(e=h()).email&&u(i,e)}function h(){var e={},t=$("#registerEmailInput"),s=t.parent(".form-input-group"),i=t.val(),r=$("#registerPassInput"),a=r.parent(".form-input-group"),l=r.val(),d=$("#registerPassConfirmInput"),h=d.parent(".form-input-group"),c=d.val();return n&&(s.removeClass("has-error"),a.removeClass("has-error"),h.removeClass("has-error"),0===l.length?a.addClass("has-error").addClass("error-required"):a.removeClass("error-required"),0!==l.length&&l.length<8?a.addClass("has-error").addClass("error-minlength"):a.removeClass("error-minlength"),l.length>100?a.addClass("has-error").addClass("error-maxlength"):a.removeClass("error-maxlength"),0===c.length?h.addClass("has-error").addClass("error-required"):h.removeClass("error-required"),c.length>0&&l.length>0&&c!==l?h.addClass("has-error").addClass("error-characters"):h.removeClass("error-characters"),0===i.length?s.addClass("has-error").addClass("error-required"):s.removeClass("error-required"),i.length>100?s.addClass("has-error").addClass("error-maxlength"):s.removeClass("error-maxlength"),i.length>0&&i.length<100&&!o.test(i)?s.addClass("has-error").addClass("error-characters"):s.removeClass("error-characters"),captchaValidator(window.signInCaptcha,"#signInCaptcha"),0===$("#registerForm .has-error").length&&(e={email:i.toLowerCase(),password:l})),e}function c(){var e=!1;if(t){var s=$("#loginEmailInput");0===s.val().length?(s.parent(".form-input-group").addClass("has-error"),e=!0):s.parent(".form-input-group").removeClass("has-error");var i=$("#loginPassInput");0===i.val().length?(i.parent(".form-input-group").addClass("has-error"),e=!0):i.parent(".form-input-group").removeClass("has-error");var n=$("#loginBtn");e?n.attr("disabled",!0):n.attr("disabled",!1)}return!e}function u(e,t){$("#userExistsError").removeClass("visibleView").addClass("hiddenView"),E(),$.ajax({url:e,method:"POST",data:t,statusCode:{200:function(e){var s;"registered"===e.message?(v(),s=t.email,$("#registeredMessage").removeClass("hiddenView").addClass("visibleView"),$("#userMail").text(s),$("#registerInputs").removeClass("visibleView").addClass("hiddenView")):(p.login(e.access_token,e.refresh_token),r.hide(),g())},401:function(){$(document).trigger("lyceum:needReload")},403:function(e){'{"error":"invalid_grant","error_description":"Invalid resource owner credentials"}'===e.responseText&&(v(),$("#loginPassInput").val(""),$("#userNotFoundError").removeClass("hiddenView").addClass("visibleView")),"email exists"===e.responseJSON.message&&(v(),$("#userExistsError").removeClass("hiddenView").addClass("visibleView"))}}})}this.show=function(){e.removeClass("hiddenView").addClass("visibleView"),window.signInCaptcha&&window.grecaptcha&&grecaptcha.reset(signInCaptcha);v()},this.hide=function(){e.removeClass("visibleView").addClass("hiddenView"),$("#userExistsError").removeClass("visibleView").addClass("hiddenView"),v()},$(document).on("click","#loginBtn",l),$(document).on("click","#registerBtn",d),$(document).on("keyup","#loginForm .form-input",function(e){13===e.keyCode?l():c()}),$(document).on("keyup","#registerForm .form-input",function(e){13===e.keyCode?d():h()}),$(document).on("click",".requestPasswordView",function(e){e.preventDefault(),r.hide(),a.show()})},a=new function(){var e=$("#passRequestView");function t(){var e=$("#passEmail"),t=e.parent().removeClass("has-error"),s=e.val();return 0===s.length?t.addClass("has-error").addClass("error-required"):t.removeClass("error-required"),s.length>100?t.addClass("has-error").addClass("error-maxlength"):t.removeClass("error-maxlength"),s.length>0&&s.length<100&&!o.test(s)?t.addClass("has-error").addClass("error-characters"):t.removeClass("error-characters"),!t.hasClass("has-error")}this.show=function(){window.requestCaptcha&&window.grecaptcha&&grecaptcha.reset(requestCaptcha);e.removeClass("hiddenView").addClass("visibleView"),$("#passReqNotFoundError").removeClass("visibleView").addClass("hiddenView"),$("#passReqFound").removeClass("visibleView").addClass("hiddenView"),$("#passReqForm").removeClass("hiddenView").addClass("visibleView"),$("#passEmail").val("")},this.hide=function(){e.removeClass("visibleView").addClass("hiddenView")},$(document).on("click","#requestPassBtn",function(){var e=captchaValidator(window.requestCaptcha,"#passCaptcha"),s=t();$("#passReqNotFoundError").removeClass("visibleView").addClass("hiddenView"),e&&s&&(E(),$.post(n,{mail:$("#passEmail").val().toLowerCase()}).done(function(e){e.error&&"user not found"===e.error&&$("#passReqNotFoundError").removeClass("hiddenView").addClass("visibleView"),e.error&&"error"===e.error&&$(document).trigger("lyceum:globalError"),"Email Sent"===e&&($("#passReqFound").removeClass("hiddenView").addClass("visibleView"),$("#passReqForm").removeClass("visibleView").addClass("hiddenView")),v()}).fail(function(){$(document).trigger("lyceum:globalError"),v()}))}),$(document).on("click","#requestCancelBtn",function(){r.show(),a.hide()}),$(document).on("click","#returnToLogin",function(e){e.preventDefault(),r.show(),a.hide()}),$(document).on("keyup","#passEmail",t)},l=new function(){var e=$("#userView");this.show=function(t){e.html(t).removeClass("hiddenView").addClass("visibleView"),v()},this.hide=function(){e.removeClass("visibleView").addClass("hiddenView"),v()}};window.pupilViews={},window.loadingStart=E,window.loadingEnd=v;var d,h,c,p=new jqOAuth({events:{login:function(){},logout:function(){},tokenExpiration:function(){return $.post(s,{grant_type:"refresh_token",refresh_token:p.data.refreshToken}).done(function(e){p.setAccessToken(e.access_token,e.refresh_token)}).fail(function(){r.show(),l.hide()})}}}),u=document.getElementById("settingsDialog"),_=document.getElementById("snackbar"),m=document.getElementById("pupilSettingsDialog"),f=document.getElementById("sendRequestDialog");function g(){u.opened&&y(),f.opened&&b(),m.opened&&w(),$.get("/api/pupils/userInfo").done(function(e){r.hide(),l.show(e),t=$("#pupilSettingsDialogContent").detach()}).fail(function(){r.show(),l.hide()})}function C(){var t={};if("password"===e){var s=$("#pupilPassword"),i=$("#pupilPasswordConfirm"),n=s.val(),o=i.val(),r=s.parent(),a=i.parent();r.removeClass("has-error"),a.removeClass("has-error"),0===n.length?r.addClass("has-error").addClass("error-required"):r.removeClass("error-required"),0!==n.length&&n.length<8?r.addClass("has-error").addClass("error-minlength"):r.removeClass("error-minlength"),n.length>100?r.addClass("has-error").addClass("error-maxlength"):r.removeClass("error-maxlength"),0===o.length?a.addClass("has-error").addClass("error-required"):a.removeClass("error-required"),o.length>0&&n.length>0&&o!==n?a.addClass("has-error").addClass("error-characters"):a.removeClass("error-characters"),0===$("#pupilSettingsDialog .has-error").length&&(t={password:n})}return t}function E(){u.opened||m.opened||f.opened?$(".cs-loader").not(".page-loader").addClass("loading-start"):$(".cs-loader").addClass("loading-start")}function v(){$(".cs-loader").removeClass("loading-start")}function y(){u.opened=!1,$("#settingsDialog").removeClass("dialog-scale"),u.close(),clearTimeout(d)}function b(){f.opened=!1,$("#sendRequestDialog").removeClass("dialog-scale"),f.close(),clearTimeout(c)}function w(){m.opened=!1,$("#pupilSettingsDialog").removeClass("dialog-scale"),m.close(),clearTimeout(h)}$(document).on("lyceum:dataready",function(){componentHandler.upgradeAllRegistered()}),$(document).on("lyceum:needReload",g),$(document).on("lyceum:logout",function(){p.logout(),window.location.reload()}),$(document).on("lyceum:globalError",function(){$(document).trigger("lyceum:showNotification","Произошла ошибка. Что-то пошло не так!"),console.log("GLOBAL ERROR")}),$(document).on("lyceum:openDialog",function(e,t){u.opened=!0,$(".modal-settings-container").html(t),$(".dropify").dropify(),u.showModal(),d=setTimeout(function(){$("#settingsDialog").addClass("dialog-scale"),componentHandler.upgradeAllRegistered()},.5)}),$(document).on("lyceum:openRequestDialog",function(){var e=$("#rulesContainer"),t=$("#saveRequest"),s=$("#rulesOk"),i=$("#rulesOkLabel"),n=$("#rulesOkHelp");f.opened=!0,f.scrolledToBottom=!1,e.off("scroll"),t.attr("disabled",!0),i.addClass("is-disabled"),n.removeClass("hiddenView").addClass("visibleView"),s.attr("disabled",!0),document.querySelector("#rulesOkLabel").MaterialCheckbox.uncheck(),f.showModal(),e.animate({scrollTop:0},0),c=setTimeout(function(){$("#sendRequestDialog").addClass("dialog-scale")},.5),e.on("scroll",function(){$(this).scrollTop()+$(this).innerHeight()>=$(this)[0].scrollHeight&&(f.scrolledToBottom=!0,t.attr("disabled",!1),s.attr("disabled",!1),i.removeClass("is-disabled"),n.removeClass("visibleView").addClass("hiddenView"),e.off("scroll"))})}),$(document).on("lyceum:openSettingsDialog",function(e,t){m.opened=!0,$(".modal-pupil-settings-container").html(t),m.showModal(),h=setTimeout(function(){$("#pupilSettingsDialog").addClass("dialog-scale"),componentHandler.upgradeAllRegistered()},.5)}),$(document).on("lyceum:showNotification",function(e,t){var s={message:t,timeout:2e3};_.MaterialSnackbar.showSnackbar(s)}),$(document).on("click","#settingsDialog .close-dialog",y),$(document).on("click","#sendRequestDialog .close-dialog",b),$(document).on("click","#pupilSettingsDialog .close-dialog",w),$(document).on("click","#savePupilSettings",function(){if("password"===e){var t=C();t.password&&(s=t,$.ajax({url:"/api/pupils/password",method:"POST",data:s,statusCode:{200:function(e){"ok"===e.message&&$(document).trigger("lyceum:needReload")},401:function(){$(document).trigger("lyceum:needReload")},403:function(e){'{"error":"invalid_grant","error_description":"Invalid resource owner credentials"}'===e.responseText&&(v(),$("#loginPassInput").val(""),showUserNotFoundError()),"email exists"===e.responseJSON.message&&(v(),showNameExistsError())}}}))}var s}),$(document).on("click",".settings-list-item.pupil-settingd",function(s){s.preventDefault(),s.stopPropagation(),"logout"===(e=$(s.currentTarget).attr("href"))?$(document).trigger("lyceum:logout"):$(document).trigger("lyceum:openSettingsDialog",t.find("#"+e).html())}),$(document).on("keyup","#pupilSettingsDialog .form-input",C),function(){u.opened=!1,u.showModal||dialogPolyfill.registerDialog(u);f.opened=!1,f.showModal||dialogPolyfill.registerDialog(f);m.opened=!1,m.showModal||dialogPolyfill.registerDialog(m)}(),g()});